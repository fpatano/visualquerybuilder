# Visual SQL Query Builder Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# DATABRICKS APPS DEPLOYMENT (Production)
# =============================================================================
# These variables are automatically set by Databricks Apps runtime

# App Configuration
DATABRICKS_APP_NAME=visual-query-builder
DATABRICKS_APP_PORT=8000
DATABRICKS_APP_URL=https://your-app-name.aws.databricksapps.com

# Service Principal Authentication (for app-level operations)
DATABRICKS_CLIENT_ID=your-service-principal-client-id
DATABRICKS_CLIENT_SECRET=your-service-principal-client-secret

# Databricks Workspace Configuration
DATABRICKS_HOST=dbc-your-workspace.cloud.databricks.com
DATABRICKS_SERVER_HOSTNAME=dbc-your-workspace.cloud.databricks.com
DATABRICKS_WORKSPACE_ID=your-workspace-id

# SQL Warehouse Configuration
DATABRICKS_WAREHOUSE_ID=your-warehouse-id
DATABRICKS_HTTP_PATH=/sql/1.0/warehouses/your-warehouse-id

# =============================================================================
# LOCAL DEVELOPMENT
# =============================================================================
# These variables are needed for local development and testing

# Personal Access Token (for local development only)
# - Databricks Apps: Automatically uses x-forwarded-access-token header from runtime
# - Local development: Use personal access token from environment
DATABRICKS_TOKEN=your-personal-access-token

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Server Configuration
PORT=8000
NODE_ENV=development

# Logging
LOG_LEVEL=info

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable specific features
FEATURE_ALLOW_NO_DBRX=0

# =============================================================================
# SECURITY NOTES
# =============================================================================

# IMPORTANT: Never commit .env files to version control
# - DATABRICKS_CLIENT_SECRET contains sensitive information
# - DATABRICKS_TOKEN contains your personal access token
# - Use .env.local for local development overrides

# =============================================================================
# DATABRICKS APPS AUTHENTICATION FLOW
# =============================================================================

# 1. Service Principal Authentication (App-level operations)
#    - Used for: App configuration, logging, shared resources
#    - Environment variables: DATABRICKS_CLIENT_ID, DATABRICKS_CLIENT_SECRET
#    - Scope: Limited to app's configured permissions

# 2. User Authorization (On-behalf-of-user operations)
#    - Used for: Unity Catalog access, SQL queries, user-specific data
#    - Header: x-forwarded-access-token (automatically provided by Databricks Apps)
#    - Scope: Respects user's Unity Catalog permissions and row-level security

# 3. Combined Authentication Model
#    - App operations use service principal
#    - User operations use forwarded access token
#    - This ensures proper security boundaries and audit trails